<?php
namespace Kyrne\Shout\Commands; use Flarum\Settings\SettingsRepositoryInterface; use Illuminate\Contracts\Hashing\Hasher; use Kyrne\Shout\Encryption; class UpdateKeysHandler { public function handle(UpdateKeys $sp6a6b12) { $spd4bab0 = $sp6a6b12->actor; $sp2b7469 = $sp6a6b12->data; $sp953fd1 = Encryption::where('user_id', $spd4bab0->id)->firstOrFail(); $sp953fd1->prekeys = json_encode($sp2b7469['preKeys']); $sp953fd1->prekey_index = 0; $sp953fd1->bundle_proto = $sp2b7469['bundle']; $sp953fd1->identity_key = $sp2b7469['encryptedIdentity']; $sp953fd1->save(); return $sp953fd1; } }