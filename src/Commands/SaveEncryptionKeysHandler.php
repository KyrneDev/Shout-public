<?php
namespace Kyrne\Shout\Commands; use Flarum\Settings\SettingsRepositoryInterface; use Illuminate\Contracts\Hashing\Hasher; use Kyrne\Shout\Encryption; class SaveEncryptionKeysHandler { public function handle(SaveEncryptionKeys $sp6a6b12) { $spd4bab0 = $sp6a6b12->actor; $sp2b7469 = $sp6a6b12->data; $sp870272 = app(SettingsRepositoryInterface::class)->get('kyrne-shout.set_own_password') ? app(Hasher::class)->make($sp2b7469['password']) : ''; $sp953fd1 = Encryption::populate($spd4bab0, $sp2b7469['encryptedIdentity'], $sp2b7469['preKeys'], $sp2b7469['bundle'], $sp870272); $sp953fd1->save(); return $sp953fd1; } }