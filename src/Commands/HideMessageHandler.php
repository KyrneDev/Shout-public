<?php
namespace Kyrne\Shout\Commands; use Flarum\User\Exception\PermissionDeniedException; use Kyrne\Shout\Message; class HideMessageHandler { public function handle(HideMessage $sp6a6b12) { $spd4bab0 = $sp6a6b12->actor; $sp55dba7 = $sp6a6b12->messageId; $spd4bab0->assertCan('deleteMessage'); $sp2a3d03 = Message::find($sp55dba7); if ($spd4bab0->id != $sp2a3d03->user_id) { throw new PermissionDeniedException(); } $sp2a3d03->is_hidden = true; $sp2a3d03->save(); } }